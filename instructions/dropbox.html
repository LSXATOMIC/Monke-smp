<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <link rel="apple-touch-icon-precomposed" href="images/apple-touch-icon-precomposed.png"><!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72"   href="images/apple-touch-icon-72x72-precomposed.png"><!-- For the iPad mini and the first- and second-generation iPad on iOS ≤ 6: -->
    <link rel="apple-touch-icon-precomposed" sizes="76x76"   href="images/apple-touch-icon-76x76-precomposed.png"><!-- For the iPad mini and the first- and second-generation iPad on iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon-120x120-precomposed.png"><!-- For iPhone with high-resolution Retina display running iOS ≥ 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/apple-touch-icon-152x152-precomposed.png"><!-- For iPad with high-resolution Retina display running iOS ≥ 7: -->
    <link rel="icon" sizes="196x196" href="images/apple-touch-icon.png"><!-- Chrome v31+ for Android -->
    <link rel="icon" sizes="16x16" type="image/png" href="images/favicon.png" />
	
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Setting up your map on Dropbox</title>
	
	<script type="text/javascript">
		function encode() {
			var obj = document.getElementById('dropboxurl');
			var mapUrl = document.getElementById('mapUrl');
			
			var unencoded = obj.value
			if (typeof(unencoded) != "undefined") {
				unencoded = unencoded.replace(/\?[^?]*?$/ig, '');
				unencoded = unencoded.replace(/www\.dropbox\.com\//ig, 'dl.dropboxusercontent.com/');
				unencoded = unencoded.replace(/dropbox\.com\//ig, 'dl.dropboxusercontent.com/');
			}
			var directLink = encodeURIComponent(unencoded).replace(/'/g,"%27").replace(/"/g,"%22");	
			
			mapUrl.innerHTML = "https://buildingwithblocks.info/map173/index.html?src=<span style=\"color:green;\">" + directLink + "</span>";
			mapUrl.setAttribute('href', "https://buildingwithblocks.info/map173/index.html?src=" + directLink);
		}
	</script>
	
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Make a Minecraft map</h1>        
		<h2>Using Dropbox</h2>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">

		<p><a href="index.html">&#8617; Return to main map-making instructions</a></p>
				
		<h2>How to set up your map on Dropbox</h2>
		
		<ol>
		<li>Create a .txt file containing all your <a href="index.html#LocationListFormat">map locations</a>, and copy it into your Dropbox.</li>
		<li><a href="https://www.dropbox.com/help/167/en">Select "Share link"</a> from the dropbox menu, or click the file's "Share" button, and copy the link.</li>
		<li>Paste the link into the box below and click "Covert"<br/>
		
			<textarea cols="80" rows="2" id="dropboxurl">https://www.dropbox.com/s/62wrgkpt38wlk30/example.txt</textarea>
			<br/>
			<input type="button" onclick="encode()" value="Convert">

			<br/>
			<p>... and here's the link for your new map: <a id="mapUrl" ></a></p>
		</li>
		</ol>
		
		All that the Convert button is doing is:
		<ol>
		<li><a href="https://zapier.com/learn/how-to/generate-direct-dropbox-link/">Turning the link into a direct download link</a> by replacing 
		<code>www.dropbox.com</code> with <code>dl.dropboxusercontent.com</code></a>.</li>
		<li><a href="UrlEncoder.html">Encoding</a> the direct download link, so the finished URL will be nicely formatted.</li>
		<li>Adding the encoded link as the src parameter to the URL of the map generator, i.e. adding it to the end of this URL:</li>
			<pre>https://buildingwithblocks.info/map173/index.html?src=</pre>

			Example:<br/>
			<a style="font-size: 75%" href="https://buildingwithblocks.info/map173/index.html?src=https%3A%2F%2Fdl.dropboxusercontent.com%2Fs%2F62wrgkpt38wlk30%2Fexample.txt">https://buildingwithblocks.info/map173/index.html?src=<span style="color:green;">https%3A%2F%2Fdl.dropboxusercontent.com%2Fs%2F62wrgkpt38wlk30%2Fexample.txt</span></a>
		</li>
		</ol>
		<br/>
		
		<!--
		<p><span class="note">(Dropbox allows cross-origin resource sharing, so putting your Dropbox URL onto the end of the Google Drive URL 
		above works fine - you don't need to have a Google Drive account)</span></p>
		-->

		<!--
		<h3>Tip</h3>
		<p><a href="UrlEncoder.html">Encode your Dropbox URL</a> before adding it to the map URL, to keep the finished URL nicely formatted.</p>
		-->
		
				
		<!-- Hosting on Dropbox is no longer possible without hacks - see https://web.archive.org/web/20180222181255/https://www.dropbox.com/help/files-folders/public-folder
		
		<h2><a id="Visibility"></a>Hosting your own copy of the map generator from Dropbox</h2>
				
		<div style="float: right"> 
		<a href="https://github.com/Treer/minecraft-map/archive/v1.73.zip" class="downloadbutton">
            <small>Download</small>
            .zip file
          </a>
		</div>
		
		<p>It's also possible to download your own copy of the map generator, then run it from your Dropbox account.</p>

		<p>See option 4 on <a href="http://www.maketecheasier.com/4-ways-to-host-your-website-on-dropbox/">this instructions page</a> for
		where to put the contents of this zip file.</p>
		-->
		
		<p><a href="index.html">&#8617; Return to main map-making instructions</a></p>
		
		</section>

      </div>
    </div>

  </body>
</html>